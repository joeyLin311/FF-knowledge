---
date created: 2022-05-24 00:16
date updated: 2022-05-25 22:43
---

#react

## 动机

react Hooks 的出现源于在react 之前的版本中, 组件的状态没有一个很好的行为去复用逻辑, 当然我们可以用 [[react HOC, render props, Hooks]] 去重新组织组件的内部行为. 但是它们的方法会让组件维护变得比较麻烦, 形成"嵌套地狱".

### 复杂组件变得难以理解

react 之前版本在维护组件过程中, 考虑状态逻辑和副作用一直是一个通点, 在生命周期中我们会使用 `componentDidMount` 或者 `componentDidUpdate` 拿到数据, 但是在同一个周期中可能会包含其它的逻辑. 这些行为可能要在在组件的生命周期中清除, 这就容易引发组件之间共享状态的不一致, 导致bug

**Hooks 的出现可以让我们无需修改组件结构的情况下, 复用状态逻辑**. Hooks 是函数式的, 并非强制由生命周期划分不同的行为. 而且在 class component 中关于`this` 的指向会让编写过程中增加更多的心智负担, hooks 的出现可以让我们放心地直接使用函数式组件, 使用更多的react 特性. 毕竟 react 的设计更像函数式编程

## Hooks 的使用

Hooks 使用闭包来保存状态, 使用链表保存一系列的 Hooks, 将链表中的第一个Hook 与 Fiber 关联. 在Fiber树更新时, 就能从 Hooks 中计算出最终输出的状态和执行相关的副作用.
注意在使用过程中:

- 不要在循环, 条件或嵌套函数中调用 Hooks
- 只在 React 函数中调用 Hooks

## Hooks 原理
