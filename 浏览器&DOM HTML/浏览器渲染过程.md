---
date created: 2021-12-09 22:58
---

#browser

# 浏览器渲染过程

![[浏览器渲染流程.png]]
**浏览器一个完整的渲染流程大致总结如下:**

- 渲染进程将 HTML 内容转换成 DOM tree
- 渲染引擎将 CSS 样式表转化为浏览器可理解的 styleSheet , 计算 DOM 节点的样式, 构建 CSSOM 样式树
- 创建布局树, 计算元素的布局信息
- 对每个图层生成绘制列表, 并将其提交到合成线程
- 合成线程将图层分成图块, 并在光栅化线程池中将图块转换成位图
- 合成线程发送绘制图块命令 DrawQuad 给浏览器进程
- 浏览器进程根据 DrawQuad 消息生成页面, 并显示到显示器

**另一个版本**
当浏览器进程获取到 HTML 的第一个字节开始，会通知渲染进程开始解析 HTML，将 HTML 转换成 DOM 树，并进入渲染流程。一般所有的浏览器都会经过五大步骤，分别是：

1. PARSE：解析 HTML，构建 DOM 树。
2. STYLE：为每个节点计算最终的有效样式。
3. LAYOUT：为每个节点计算位置和大小等布局信息。
4. PAINT：绘制不同的盒子，为了避免不必要的重绘，将会分成多个层进行处理。
5. COMPOSITE & RENDER：将上述不同的层合成为一张位图，发送给 GPU，渲染到屏幕上。

为了提高浏览器的渲染性能，通常的手段是保证渲染流程不被阻塞，避免不必要的绘制计算和[[浏览器回流与重绘]]，利用 GPU 硬件加速等技术来提高渲染性能。

[从输入 URL 到渲染全过程](https://juejin.cn/post/6844904194801926157#heading-29)
