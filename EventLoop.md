1. JS 语言是单线程执行, 因为它作最开始作为浏览器脚本语言, 与用户交互和操作DOM的原因决定了只能以单线程执行, 不然会带来复杂的同步问题. 比如一个线程执行删除DOM另一个反之就尴尬了. 后来HTML5标准提出了 web worker标准允许JS脚本创建多个线程, 但是这些线程也受主线程控制且不能操作DOM, 所以JS还是单线程
2. 由单线程引出的问题就是代码执行的顺序需要做规定, 这个时候**任务队列**就应运而生. JS设计任务模式分为**同步任务(synchronous)** 和 **异步任务(asynchronous)**. 
	1. 同步任务意为在主线程上排队执行的任务, 一个任务执行后再执行下一个任务
	2. 异步任务指的是不进入主线程, 而是进入任务队列(task queue)的任务, 只有任务队列通知主线程某个异步任务可以执行, 队列中的任务才会进入主线程执行
	3. 所以就有了任务执行图![[任务队列执行图.jpg]]
3. Event Loop 
	1. 由上我们就得到了再主线程中执行任务是一个不断循环往复的过程, 这个过程就是**事件循环**
	2. ![[事件循环机制.png]]
	3. 上图中，主线程运行的时候，产生堆（heap）和栈（stack），栈中的代码调用各种外部API，它们在"任务队列"中加入各种事件（click，load，done）。只要栈中的代码执行完毕，主线程就会去读取"任务队列"，依次执行那些事件所对应的回调函数。执行栈中的代码（同步任务），总是在读取"任务队列"（异步任务）之前执行。
4. 宏任务与微任务
	1.  宏任务（Macrotask） 称为 Task, 微任务（Microtask） 称为 Jobs。
	2.  宏任务是由宿主（浏览器、Node）发起的，而微任务由 JS 自身发起。
	3.  宏任务: setTimeout, setInterval, I/O 事件队列, script 整体代码块, UI交互事件
	4.  微任务: Promise.then(),  MutaionObserver,  Object.observe
