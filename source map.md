#webpack 
## source map 是什么? 生产环境如何配置?
`source map` 是将编译、打包、压缩后的代码映射回源代码的过程。打包压缩后的代码不具备良好的可读性，想要调试源码就需要 soucre map。
map文件只要不打开开发者工具，浏览器是不会加载的。
线上环境一般有三种处理方案：
-   `hidden-source-map`：借助第三方错误监控平台 Sentry 使用
-   `nosources-source-map`：只会显示具体行数以及查看源代码的错误栈。安全性比 sourcemap 高
-   `sourcemap`：通过 nginx 设置将 .map 文件只对白名单开放(公司内网)
注意：避免在生产中使用 `inline-` 和 `eval-`，因为它们会增加 bundle 体积大小，并降低整体性能。

`Sourcemap` 本质上是一个信息文件，里面储存着代码转换前后的对应位置信息。它记录了转换压缩后的代码所对应的转换前的源代码位置，是源代码和生产代码的映射。 `Sourcemap` 解决了在打包过程中，代码经过压缩，去空格以及 `babel` 编译转化后，由于代码之间差异性过大，造成无法`debug`的问题，简单说 `Sourcemap` 构建了处理前以及处理后的代码之间的一座桥梁，方便定位生产环境中出现 `bug` 的位置。因为现在的前端开发都是模块化、组件化的方式，在上线前对 js 和 css 文件进行合并压缩容易造成混淆。如果对这样的线上代码进行调试，肯定不切实际，`sourceMap` 的作用就是能够让浏览器的调试面版将生成后的代码映射到源码文件当中，开发者可以在源码文件中 debug，这样就会让程序员调试轻松、简单很多。

`Sourcemap` 的种类有很多， 在生产环境下可以用`process.env`判断一下。  `webpack`中可以在`devtool`中设置, 在开发环境中可以配置`devtool`为`cheap-module-source-map`，方便调试。生产环境下建议采用`none`的方式，这样做不暴露源代码。或者是`nosources-source-map` 的方式，既可以定位源代码位置，又不暴露源代码。